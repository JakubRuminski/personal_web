<label for=buttonB2> WebServer_solution_lab3.py: </label>
                            <button type="button" id='buttonB2' class='visibility_button' onClick="changeFileVisibility('buttonB2')"> View File </button>
                            <button type="button" id='lightbuttonB2' onClick="changeFileBackground('lightbuttonB2')">ðŸŒš</button>
                            <code class='file_code'><pre style='display: none;'><code class='comment'># Import socket module</code><br><code class='statements1'>from</code> socket <code class='statements1'>import</code> *    <br><br><code class='comment'># Create a TCP server socket</code><br><code class='comment'>#(AF_INET is used for IPv4 protocols)</code><br><code class='comment'>#(SOCK_STREAM is used for TCP)</code><br><br>serverSocket = <code class='brackets'><code class='function'>socket</code>(AF_INET, SOCK_STREAM)</code><br><br><code class='comment'># Assign a port number</code><br>serverPort = 6789<br><br><code class='comment'># Bind the socket to server address and server port</code><br><br>hostname = <code class='brackets'><code class='function'><code class='brackets'><code class='function'>gethostbyname</code>(gethostname</code>()</code>)</code><br><code class='brackets'><code class='function'>print</code>(hostname)</code><br><code class='brackets'><code class='function'><code class='brackets'><code class='function'><code class=brackets>serverSocket.</code>bind</code>(</code>(hostname, serverPort)</code>)</code><br><br><code class='comment'># Listen to at most 1 connection at a time</code><br><code class='brackets'><code class='function'><code class=brackets>serverSocket.</code>listen</code>(1)</code><br><br><code class='comment'># Server should be up and running and listening to the incoming connections</code><br><code class='statements1'>while</code> True:<br>    <code class='brackets'><code class='function'>print</code>(<code class='string'>'Ready to serve'</code>)</code><br>    <code class='comment'># Set up a new connection from the client</code><br>    connectionSocket, addr = <code class='brackets'><code class='function'><code class=brackets>serverSocket.</code>accept</code>()</code><br>    <code class='comment'># If an exception occurs during the execution of try clause</code><br>    <code class='comment'># the rest of the clause is skipped</code><br>    <code class='comment'># If the exception type matches the word after except</code><br>    <code class='comment'># the except clause is executed</code><br>    try:<br>        <code class='comment'># Receives the request message from the client</code><br>        message = <code class='brackets'><code class='function'><code class=brackets><code class='brackets'><code class='function'><code class=brackets>connectionSocket.</code>recv</code>(1024)</code>.</code>decode</code>()</code><br>        <code class='comment'># Extract the path of the requested object from the message</code><br>        <code class='comment'># The path is the second part of HTTP header, identified by [1]</code><br>        filename = <code class='brackets'><code class='function'><code class=brackets>message.</code>split</code>()</code>[1]<br>        <code class='comment'># Because the extracted path of the HTTP request includes </code><br>        <code class='comment'># a character '\', we read the path from the second character </code><br>        <code class='statements1'>with</code> <code class='brackets'><code class='function'>open</code>(filename[1:], <code class='string'>'r'</code>)</code> <code class='statements1'>as</code> f:<br>            <code class='comment'># Store the entire contenet of the requested file in a temporary buffer</code><br>            outputdata = <code class='brackets'><code class='function'><code class=brackets>f.</code>read</code>()</code><br>            outputdata = f<code class='string'>"{len(outputdata):<{16}}"</code> + outputdata<br>        <code class='comment'># Send the HTTP response header line to the connection socket</code><br>        <code class='brackets'><code class='function'><code class=brackets>connectionSocket.</code>send</code>(<code class='string'>"HTTP/11 200 <code class='brackets'><code class='function'><code class=brackets>OK\r\n\r\n"</code>.</code>encode</code>()</code>)</code><br><br>        <code class='comment'># Send the content of the requested file to the connection socket</code><br>        <code class='comment'># for i in range(0, len(outputdata)):</code><br>        <code class='brackets'><code class='function'><code class=brackets><code class='brackets'><code class='function'><code class=brackets>connectionSocket.</code>sendall</code>(outputdata.</code>encode</code>()</code>)</code><br>        <code class='brackets'><code class='function'><code class=brackets><code class='brackets'><code class='function'><code class=brackets>connectionSocket.</code>send</code>(<code class='string'>"\r\n"</code>.</code>encode</code>()</code>)</code><br><br>        <code class='comment'># Close the client connection socket</code><br>        <code class='brackets'><code class='function'><code class=brackets>connectionSocket.</code>close</code>()</code><br><br>    <code class='statements1'>except</code> IOError:<br>        <code class='comment'># Send HTTP response message for file not found</code><br>        <code class='brackets'><code class='function'><code class=brackets>connectionSocket.</code>send</code>(<code class='string'>"HTTP/11 404 Not <code class='brackets'><code class='function'><code class=brackets>Found\r\n\r\n"</code>.</code>encode</code>()</code>)</code><br>        <code class='brackets'><code class='function'><code class=brackets>connectionSocket.</code>send</code>(<code class='string'>"<html><head></head><body><h1>404 Not <code class='brackets'><code class='function'><code class=brackets>Found</h1></body></html>\r\n"</code>.</code>encode</code>()</code>)</code><br>        <code class='comment'># Close the client connection socket</code><br>        <code class='brackets'><code class='function'><code class=brackets>connectionSocket.</code>close</code>()</code><br><br><code class='brackets'><code class='function'><code class=brackets>serverSocket.</code>close</code>()</code>  <br><br> </pre></code>